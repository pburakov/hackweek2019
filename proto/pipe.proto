syntax = "proto3";

message Event {
    string key = 1;
}

message Batch {
    repeated Event events = 1;
}

message Stats {
    uint64 count = 1;
    double avgDeltaMs = 2;
}

message Queue {
    Stats stats = 1;
}

message Multi {
    repeated Queue queues = 1;
}

service Pipe {
    rpc push (Event) returns (Queue);
    rpc batch (Batch) returns (Multi);
}